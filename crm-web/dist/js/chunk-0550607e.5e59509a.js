(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0550607e"],{"143d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"total"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("我的订单")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.dialog=!0}}},[t._v("添加订单")])],1)]},proxy:!0},{key:"item.actions",fn:function(e){var r=e.item;return[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:r.feedbackStatus,expression:"item.feedbackStatus"}],attrs:{text:"",small:"",width:"20px"}},[t._v("已反馈")]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!r.feedbackStatus,expression:"!item.feedbackStatus"}],attrs:{color:"blue",small:"",dark:"",width:"20px"},on:{click:function(e){return t.feedback(r)}}},[t._v("反馈")]),a("v-btn",{staticStyle:{"margin-left":"10px"},attrs:{color:"red",small:"",dark:"",width:"20px"},on:{click:function(e){return t.deleteItem(r)}}},[t._v("取消")])]}}])}),a("v-dialog",{attrs:{"max-width":"300"},model:{value:t.isCancel,callback:function(e){t.isCancel=e},expression:"isCancel"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("提示")])]),a("v-card-text",[t._v("此订单已完成，无法取消订单")])],1)],1),a("v-dialog",{attrs:{"max-width":"300"},model:{value:t.isFeedback,callback:function(e){t.isFeedback=e},expression:"isFeedback"}},[a("v-card",[a("v-card-title",[t._v("提示")]),a("v-card-text",[t._v("此订单未完成，无法反馈")])],1)],1),a("v-dialog",{attrs:{"max-width":"290",persistent:""},model:{value:t.summitFeedback,callback:function(e){t.summitFeedback=e},expression:"summitFeedback"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("提交反馈")])]),a("v-card-text",[a("v-textarea",{attrs:{label:"请输入反馈信息"},model:{value:t.feedbackText,callback:function(e){t.feedbackText=e},expression:"feedbackText"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green",text:"",text:""},on:{click:function(e){return t.cancelFeedback()}}},[t._v("取消")]),a("v-btn",{attrs:{color:"red",text:"",text:""},on:{click:function(e){return e.stopPropagation(),t.ensureFeedback()}}},[t._v("确定")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.isDelete,callback:function(e){t.isDelete=e},expression:"isDelete"}},[a("v-card",[a("v-card-title",[a("span",[t._v("确认删除")])]),a("v-card-text",[t._v("是否确定删除此订单？")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green",text:"",text:""},on:{click:function(e){return t.cancel()}}},[t._v("取消")]),a("v-btn",{attrs:{color:"red",text:"",text:""},on:{click:function(e){return e.stopPropagation(),t.ensure()}}},[t._v("确定")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"300px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("添加订单")])]),a("v-card-text",[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{"menu-props":"auto,overflowY",items:t.product,outlined:"",label:"选择产品"},model:{value:t.productName,callback:function(e){t.productName=e},expression:"productName"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"数量"},model:{value:t.productNumber,callback:function(e){t.productNumber=e},expression:"productNumber"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"单价",readonly:""},model:{value:t.productPrice,callback:function(e){t.productPrice=e},expression:"productPrice"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.close()}}},[t._v("取消")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.save()}}},[t._v("确定")])],1)],1)],1)],1)},i=[],s=(a("b0c0"),a("a434"),{data:function(){return{item:{},feedbackItem:{},feedbackText:"",id:-1,headers:[{text:"订单编号",value:"orderId"},{text:"商品名",value:"productName"},{text:"数量",value:"number"},{text:"单价",value:"unitPrice"},{text:"总价",value:"totalPrice"},{text:"雇员编号",value:"employeeId"},{text:"订单状态",value:"orderStatus"},{text:"操作",value:"actions",sortable:!1}],desserts:[],newItem:[],product:[],productNumber:1,productName:"",productPrice:"",productId:"",isFeedback:!1,summitFeedback:!1,isCancel:!1,dialog:!1,isDelete:!1}},watch:{productName:function(t){for(var e=0;e<this.newItem.length;e++)t==this.newItem[e].name&&(this.productPrice=this.newItem[e].price,this.productId=this.newItem[e].id)}},created:function(){var t=this;2==localStorage.getItem("marker")?(this.id=localStorage.getItem("id"),this.$axios({method:"post",url:this.$url+"queryAllOrder",data:{userId:this.id}}).then((function(e){t.desserts=e.data.data,t.number=t.desserts.length})),this.$axios({method:"post",url:this.$url+"queryBuyAllProduct",data:{}}).then((function(e){t.newItem=e.data.data;for(var a=0;a<t.newItem.length;a++)t.product.push(t.newItem[a].name)}))):this.$router.push({name:"404"})},methods:{feedback:function(t){"已完成"==t.orderStatus?(this.feedbackItem=t,this.summitFeedback=!0):this.isFeedback=!0},cancelFeedback:function(){this.summitFeedback=!1},ensureFeedback:function(){var t=this.desserts.indexOf(this.feedbackItem);this.desserts[t].feedbackStatus=!0,this.$axios({method:"post",url:this.$url+"addFeedback",data:{information:this.feedbackText,userId:localStorage.getItem("id"),orderId:this.feedbackItem.orderId}}),this.cancelFeedback()},close:function(){this.dialog=!1},save:function(){var t=this;this.$axios({method:"post",url:this.$url+"addOrder",data:{number:this.productNumber,productId:this.productId,userId:this.id}}).then((function(e){var a=e.data.data,r={orderId:"",productName:"",number:"",unitPrice:"",totalPrice:"",employeeId:"",orderStatus:""};r.orderId=a.orderId,r.productName=a.productName,r.number=a.number,r.unitPrice=a.unitPrice,r.totalPrice=a.totalPrice,r.employeeId=a.employeeId,r.orderStatus=a.orderStatus,t.desserts.push(r),t.productNumber=1,t.productPrice=""})),this.close()},deleteItem:function(t){"已完成"==t.orderStatus?this.isCancel=!0:(this.isDelete=!0,this.item=t)},ensure:function(){var t=this.desserts.indexOf(this.item);this.desserts.splice(t,1),this.$axios({method:"post",url:this.$url+"deleteUserOrder",data:{orderId:this.item.orderId}}),this.isDelete=!1},cancel:function(){this.isDelete=!1}}}),o=s,c=(a("fbfb"),a("2877")),n=a("6544"),d=a.n(n),l=a("8336"),u=a("b0af"),h=a("99d9"),v=a("62ad"),m=a("8fea"),p=a("169a"),b=a("ce7e"),f=a("b974"),x=a("2fa4"),k=a("8654"),w=a("a844"),I=a("71d9"),g=a("2a7f"),_=Object(c["a"])(o,r,i,!1,null,"7b03d30e",null);e["default"]=_.exports;d()(_,{VBtn:l["a"],VCard:u["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:v["a"],VDataTable:m["a"],VDialog:p["a"],VDivider:b["a"],VSelect:f["a"],VSpacer:x["a"],VTextField:k["a"],VTextarea:w["a"],VToolbar:I["a"],VToolbarTitle:g["a"]})},1681:function(t,e,a){},"2a7f":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var r=a("71d9"),i=a("80d2"),s=Object(i["i"])("v-toolbar__title"),o=Object(i["i"])("v-toolbar__items");r["a"]},"5ceb":function(t,e,a){},a844:function(t,e,a){"use strict";var r=a("5530"),i=(a("a9e3"),a("1681"),a("8654")),s=a("58df"),o=Object(s["a"])(i["a"]);e["a"]=o.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(r["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},i["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"}},genInput:function(){var t=i["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){i["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},fbfb:function(t,e,a){"use strict";a("5ceb")}}]);
//# sourceMappingURL=chunk-0550607e.5e59509a.js.map